# ğŸª Mini Today Sales

[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-2.7.18-brightgreen.svg)](https://spring.io/projects/spring-boot)
[![Java](https://img.shields.io/badge/Java-11-orange.svg)](https://openjdk.java.net/)
[![MySQL](https://img.shields.io/badge/MySQL-8.0-blue.svg)](https://www.mysql.com/)
[![Redis](https://img.shields.io/badge/Redis-7.0-red.svg)](https://redis.io/)
[![RabbitMQ](https://img.shields.io/badge/RabbitMQ-3.12-orange.svg)](https://www.rabbitmq.com/)

> **ì‹¤ì‹œê°„ ë§¤ì¶œ ê´€ë¦¬ ë° ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ**
>
> POS ì‹œìŠ¤í…œê³¼ ì—°ë™í•˜ì—¬ ë§¤ì¶œ ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ìˆ˜ì§‘, ì²˜ë¦¬, ë¶„ì„í•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ ê¸°ë°˜ì˜ í˜„ëŒ€ì ì¸ ë§¤ì¶œ ê´€ë¦¬ ì†”ë£¨ì…˜ì…ë‹ˆë‹¤.

## ğŸ“‹ ëª©ì°¨

- [í”„ë¡œì íŠ¸ ê°œìš”](#-í”„ë¡œì íŠ¸-ê°œìš”)
- [í•µì‹¬ ê¸°ëŠ¥](#-í•µì‹¬-ê¸°ëŠ¥)
- [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
- [ê¸°ìˆ  ìŠ¤íƒ](#-ê¸°ìˆ -ìŠ¤íƒ)
- [ë¹ ë¥¸ ì‹œì‘](#-ë¹ ë¥¸-ì‹œì‘)
- [API ì‚¬ìš© ì˜ˆì‹œ](#-api-ì‚¬ìš©-ì˜ˆì‹œ)
- [ì„±ëŠ¥ ë©”íŠ¸ë¦­](#-ì„±ëŠ¥-ë©”íŠ¸ë¦­)
- [ëª¨ë‹ˆí„°ë§](#-ëª¨ë‹ˆí„°ë§)
- [ê°œë°œ í™˜ê²½](#-ê°œë°œ-í™˜ê²½)
- [ê¸°ì—¬í•˜ê¸°](#-ê¸°ì—¬í•˜ê¸°)

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

Mini Today SalesëŠ” ì¤‘ì†Œ ê·œëª¨ ë§¤ì¥ì„ ìœ„í•œ ì‹¤ì‹œê°„ ë§¤ì¶œ ê´€ë¦¬ ì‹œìŠ¤í…œìœ¼ë¡œ, ë‹¤ìŒê³¼ ê°™ì€ ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ì„ í•´ê²°í•©ë‹ˆë‹¤:

- **ì‹¤ì‹œê°„ ë§¤ì¶œ ì¶”ì **: POS ì‹œìŠ¤í…œì—ì„œ ë°œìƒí•˜ëŠ” ë§¤ì¶œ ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ìˆ˜ì§‘
- **ìë™ ì •ì‚° ì²˜ë¦¬**: ì¼ì¼/ì›”ë³„ ìë™ ì •ì‚° ë° ìˆ˜ìˆ˜ë£Œ ê³„ì‚°
- **í†µí•© ëŒ€ì‹œë³´ë“œ**: ì§ê´€ì ì¸ ë§¤ì¶œ ë¶„ì„ ë° ë¦¬í¬íŒ…
- **ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§**: ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ ìƒíƒœ ë° ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

## âœ¨ í•µì‹¬ ê¸°ëŠ¥

### ğŸ”„ ë§¤ì¶œ ë°ì´í„° ì²˜ë¦¬
- **Webhook ê¸°ë°˜ ë§¤ì¶œ ìˆ˜ì‹ **: ì™¸ë¶€ POS ì‹œìŠ¤í…œê³¼ì˜ ì‹¤ì‹œê°„ ì—°ë™
- **ë‹¤ì¤‘ ê²°ì œ ìˆ˜ë‹¨ ì§€ì›**: ì¹´ë“œ, í˜„ê¸ˆ, ê°„í¸ê²°ì œ ë“±
- **ì±„ë„ë³„ ë§¤ì¶œ ê´€ë¦¬**: ì˜¨ë¼ì¸/ì˜¤í”„ë¼ì¸ ì±„ë„ êµ¬ë¶„

### ğŸ“Š ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ
- **ì¼ì¼ ë§¤ì¶œ í˜„í™©**: ì‹¤ì‹œê°„ ë§¤ì¶œ í†µê³„ ë° íŠ¸ë Œë“œ
- **ì‹œê°„ëŒ€ë³„ ë¶„ì„**: ë§¤ì‹œê°„ ë§¤ì¶œ íŒ¨í„´ ë¶„ì„
- **ê²°ì œ ìˆ˜ë‹¨ë³„ í†µê³„**: ê²°ì œ ìœ í˜•ë³„ ìƒì„¸ ë¶„ì„

### ğŸ’° ìë™ ì •ì‚° ì‹œìŠ¤í…œ
- **ì¼ì¼ ì •ì‚°**: ë§¤ì¼ ìì • ìë™ ì •ì‚° ì²˜ë¦¬
- **ìˆ˜ìˆ˜ë£Œ ê³„ì‚°**: ê²°ì œ ìˆ˜ë‹¨ë³„ ì°¨ë“± ìˆ˜ìˆ˜ë£Œ ì ìš©
- **ì •ì‚° ë‚´ì—­ ê´€ë¦¬**: ì •ì‚° ì´ë ¥ ë° ìƒíƒœ ì¶”ì 

### ğŸ“ˆ ì¢…í•© ëª¨ë‹ˆí„°ë§
- **Prometheus ë©”íŠ¸ë¦­**: ë¹„ì¦ˆë‹ˆìŠ¤ ë° ì‹œìŠ¤í…œ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
- **Spring Actuator**: ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœ ëª¨ë‹ˆí„°ë§
- **DLQ ëª¨ë‹ˆí„°ë§**: ì‹¤íŒ¨í•œ ë©”ì‹œì§€ ì¶”ì  ë° ì¬ì²˜ë¦¬

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```mermaid
graph TB
    subgraph "External Systems"
        POS[POS System]
        Payment[Payment Gateway]
    end

    subgraph "API Layer"
        Gateway[API Gateway]
        Sales[Sales Controller]
        Monitor[Monitoring Controller]
        Settlement[Settlement Controller]
    end

    subgraph "Business Layer"
        SalesService[Sales Service]
        SettlementService[Settlement Service]
        MetricsService[Metrics Service]
        DLQService[DLQ Monitor Service]
    end

    subgraph "Data Layer"
        MySQL[(MySQL Database)]
        Redis[(Redis Cache)]
    end

    subgraph "Message Queue"
        RabbitMQ[RabbitMQ]
        DLQ[Dead Letter Queue]
    end

    subgraph "Monitoring Stack"
        Prometheus[Prometheus]
        Grafana[Grafana]
        Actuator[Spring Actuator]
    end

    POS --> Gateway
    Payment --> Gateway
    Gateway --> Sales
    Gateway --> Monitor
    Gateway --> Settlement

    Sales --> SalesService
    Monitor --> MetricsService
    Settlement --> SettlementService

    SalesService --> MySQL
    SalesService --> Redis
    SalesService --> RabbitMQ

    SettlementService --> MySQL
    MetricsService --> Redis
    DLQService --> DLQ

    RabbitMQ --> DLQ

    Actuator --> Prometheus
    MetricsService --> Prometheus
    Prometheus --> Grafana
```

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### Backend
- **Framework**: Spring Boot 2.7.18
- **Language**: Java 11
- **Build Tool**: Maven 3.8+

### Database & Cache
- **Database**: MySQL 8.0
- **Cache**: Redis 7.0
- **ORM**: Spring Data JPA + Hibernate

### Message Queue
- **Broker**: RabbitMQ 3.12
- **Pattern**: Producer-Consumer, DLQ

### Monitoring & Observability
- **Metrics**: Micrometer + Prometheus
- **Health Check**: Spring Actuator
- **Documentation**: OpenAPI 3.0 (Swagger)

### Testing
- **Unit Test**: JUnit 5
- **Integration Test**: TestContainers
- **Test Database**: H2 (Unit), MySQL (Integration)

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­

```bash
# Java 11+ ì„¤ì¹˜ í™•ì¸
java -version

# Maven 3.8+ ì„¤ì¹˜ í™•ì¸
mvn -version

# Docker ì„¤ì¹˜ í™•ì¸ (ì„ íƒì‚¬í•­)
docker --version
```

### ë¡œì»¬ ê°œë°œ í™˜ê²½ ì„¤ì •

1. **í”„ë¡œì íŠ¸ í´ë¡ **
```bash
git clone https://github.com/your-org/mini-today-sales.git
cd mini-today-sales
```

2. **ì™¸ë¶€ ì˜ì¡´ì„± ì‹¤í–‰ (Docker Compose)**
```bash
# MySQL, Redis, RabbitMQ ì‹¤í–‰
docker-compose up -d
```

3. **ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹Œë“œ ë° ì‹¤í–‰**
```bash
# ë¹Œë“œ
mvn clean compile

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
mvn test

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
mvn spring-boot:run
```

4. **ì„œë¹„ìŠ¤ í™•ì¸**
```bash
# API ë¬¸ì„œ í™•ì¸
curl http://localhost:8080/swagger-ui/index.html

# Health Check
curl http://localhost:8080/actuator/health

# Prometheus ë©”íŠ¸ë¦­
curl http://localhost:8080/actuator/prometheus
```

### í™˜ê²½ë³„ ì„¤ì •

#### ê°œë°œ í™˜ê²½ (application-dev.yml)
```yaml
spring:
  profiles: dev
  datasource:
    url: jdbc:mysql://localhost:3306/today_sales_dev
  redis:
    host: localhost
    port: 6379
  rabbitmq:
    host: localhost
    port: 5672
```

#### ìš´ì˜ í™˜ê²½ (application-prod.yml)
```yaml
spring:
  profiles: prod
  datasource:
    url: ${DB_URL}
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
  redis:
    host: ${REDIS_HOST}
    port: ${REDIS_PORT}
```

## ğŸ”§ API ì‚¬ìš© ì˜ˆì‹œ

### ë§¤ì¶œ ë“±ë¡

```bash
# ë§¤ì¶œ ë°ì´í„° ë“±ë¡
curl -X POST http://localhost:8080/api/v1/sales/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "businessNumber": "123-45-67890",
    "transactionTime": "2024-01-15T14:30:00",
    "amount": 25000,
    "paymentType": "CARD",
    "channel": "ONLINE",
    "orderNumber": "ORDER-20240115-001"
  }'
```

**ì‘ë‹µ:**
```json
{
  "success": true,
  "message": "ë§¤ì¶œì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤",
  "data": {
    "id": 1,
    "amount": 25000,
    "paymentType": "CARD",
    "channel": "ONLINE",
    "orderNumber": "ORDER-20240115-001",
    "createdAt": "2024-01-15T14:30:00"
  }
}
```

### ëŒ€ì‹œë³´ë“œ ì¡°íšŒ

```bash
# ì¼ì¼ ëŒ€ì‹œë³´ë“œ ì¡°íšŒ
curl "http://localhost:8080/api/v1/sales/dashboard/123-45-67890?date=2024-01-15"
```

**ì‘ë‹µ:**
```json
{
  "success": true,
  "data": {
    "date": "2024-01-15",
    "totalAmount": 125000,
    "totalCount": 15,
    "paymentTypeStatistics": [
      {
        "paymentType": "CARD",
        "amount": 100000,
        "count": 12,
        "fee": 2000,
        "netAmount": 98000
      }
    ],
    "hourlyStatistics": [
      {
        "hour": 14,
        "amount": 25000,
        "count": 3
      }
    ]
  }
}
```

### ì›”ë³„ ë¦¬í¬íŠ¸

```bash
# ì›”ë³„ ë¦¬í¬íŠ¸ ì¡°íšŒ
curl "http://localhost:8080/api/v1/sales/report/monthly/123-45-67890?yearMonth=2024-01"
```

## ğŸ“Š ì„±ëŠ¥ ë©”íŠ¸ë¦­

### ì‘ë‹µ ì‹œê°„ ëª©í‘œ
- **ë§¤ì¶œ ë“±ë¡ API**: < 100ms (P95)
- **ëŒ€ì‹œë³´ë“œ ì¡°íšŒ**: < 200ms (P95)
- **ë¦¬í¬íŠ¸ ìƒì„±**: < 500ms (P95)

### ì²˜ë¦¬ëŸ‰ ëª©í‘œ
- **ë§¤ì¶œ ë“±ë¡**: 1,000 TPS
- **ì¡°íšŒ API**: 5,000 TPS
- **ì •ì‚° ì²˜ë¦¬**: 10,000 ê±´/ë¶„

### ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤
- **CPU ì‚¬ìš©ë¥ **: < 70%
- **ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ **: < 80%
- **DB ì»¤ë„¥ì…˜**: ìµœëŒ€ 20ê°œ

### ì£¼ìš” ë©”íŠ¸ë¦­

```bash
# ë§¤ì¶œ ê´€ë ¨ ë©”íŠ¸ë¦­
sales_created_total
sales_amount_total
sales_processing_duration_seconds

# ì‹œìŠ¤í…œ ë©”íŠ¸ë¦­
jvm_memory_used_bytes
jvm_gc_collection_seconds
http_requests_total

# ë¹„ì¦ˆë‹ˆìŠ¤ ë©”íŠ¸ë¦­
daily_settlement_amount
payment_type_distribution
```

## ğŸ” ëª¨ë‹ˆí„°ë§

### Health Check ì—”ë“œí¬ì¸íŠ¸

```bash
# ì „ì²´ ìƒíƒœ í™•ì¸
curl http://localhost:8080/actuator/health

# ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ
curl http://localhost:8080/actuator/health/db

# Redis ìƒíƒœ
curl http://localhost:8080/actuator/health/redis

# RabbitMQ ìƒíƒœ
curl http://localhost:8080/actuator/health/rabbit
```

### ì»¤ìŠ¤í…€ ëª¨ë‹ˆí„°ë§

```bash
# ì‹œìŠ¤í…œ ì •ë³´
curl http://localhost:8080/api/monitoring/system/info

# ë©”íŠ¸ë¦­ ìš”ì•½
curl http://localhost:8080/api/monitoring/metrics/summary

# DLQ ëª¨ë‹ˆí„°ë§
curl http://localhost:8080/api/monitoring/dlq/status
```

### Grafana ëŒ€ì‹œë³´ë“œ

1. **ë§¤ì¶œ ëŒ€ì‹œë³´ë“œ**: ì‹¤ì‹œê°„ ë§¤ì¶œ í˜„í™© ë° íŠ¸ë Œë“œ
2. **ì‹œìŠ¤í…œ ëŒ€ì‹œë³´ë“œ**: JVM, DB, ìºì‹œ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
3. **ë¹„ì¦ˆë‹ˆìŠ¤ ëŒ€ì‹œë³´ë“œ**: ì •ì‚°, ìˆ˜ìˆ˜ë£Œ, ROI ë¶„ì„

## ğŸ§ª ê°œë°œ í™˜ê²½

### í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸
mvn test

# í†µí•© í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
mvn test -Dtest="*IntegrationTest"

# íŠ¹ì • í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤
mvn test -Dtest=SimpleIntegrationTest
```

### ì½”ë“œ í’ˆì§ˆ í™•ì¸

```bash
# ì •ì  ë¶„ì„
mvn spotbugs:check

# ì½”ë“œ í¬ë§·íŒ…
mvn spring-javaformat:apply

# ì˜ì¡´ì„± ë¶„ì„
mvn dependency:analyze
```

### í”„ë¡œíŒŒì¼ë§

```bash
# ê°œë°œ í™˜ê²½ìœ¼ë¡œ ì‹¤í–‰
mvn spring-boot:run -Dspring-boot.run.profiles=dev

# ë””ë²„ê·¸ ëª¨ë“œ
mvn spring-boot:run -Dspring-boot.run.jvmArguments="-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5005"
```

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
mini-today-sales/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/com/okpos/todaysales/
â”‚   â”‚   â”‚   â”œâ”€â”€ controller/          # REST API ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”‚   â”‚   â”œâ”€â”€ service/             # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”‚   â”œâ”€â”€ repository/          # ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ
â”‚   â”‚   â”‚   â”œâ”€â”€ entity/              # JPA ì—”í‹°í‹°
â”‚   â”‚   â”‚   â”œâ”€â”€ dto/                 # ë°ì´í„° ì „ì†¡ ê°ì²´
â”‚   â”‚   â”‚   â”œâ”€â”€ config/              # ì„¤ì • í´ë˜ìŠ¤
â”‚   â”‚   â”‚   â””â”€â”€ listener/            # ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚       â”œâ”€â”€ application.yml      # ê¸°ë³¸ ì„¤ì •
â”‚   â”‚       â”œâ”€â”€ application-dev.yml  # ê°œë°œ í™˜ê²½ ì„¤ì •
â”‚   â”‚       â””â”€â”€ application-prod.yml # ìš´ì˜ í™˜ê²½ ì„¤ì •
â”‚   â””â”€â”€ test/
â”‚       â”œâ”€â”€ java/                    # í…ŒìŠ¤íŠ¸ ì½”ë“œ
â”‚       â””â”€â”€ resources/               # í…ŒìŠ¤íŠ¸ ë¦¬ì†ŒìŠ¤
â”œâ”€â”€ docs/                            # ë¬¸ì„œ
â”œâ”€â”€ docker-compose.yml               # ë¡œì»¬ ê°œë°œ í™˜ê²½
â”œâ”€â”€ Dockerfile                       # ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€
â””â”€â”€ pom.xml                         # Maven ì„¤ì •
```

## ğŸ¤ ê¸°ì—¬í•˜ê¸°

í”„ë¡œì íŠ¸ì— ê¸°ì—¬í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ìì„¸í•œ ë‚´ìš©ì€ [CONTRIBUTING.md](CONTRIBUTING.md)ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”.

### ì£¼ìš” ê¸°ì—¬ ê°€ì´ë“œë¼ì¸

1. **ì´ìŠˆ ìƒì„±**: ë²„ê·¸ ë¦¬í¬íŠ¸ë‚˜ ê¸°ëŠ¥ ì œì•ˆì€ GitHub Issuesë¥¼ í™œìš©í•´ì£¼ì„¸ìš”
2. **ë¸Œëœì¹˜ ì „ëµ**: `feature/ê¸°ëŠ¥ëª…` ë˜ëŠ” `fix/ë²„ê·¸ëª…` í˜•íƒœë¡œ ë¸Œëœì¹˜ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”
3. **ì»¤ë°‹ ë©”ì‹œì§€**: [Conventional Commits](https://www.conventionalcommits.org/) ê·œì¹™ì„ ë”°ë¼ì£¼ì„¸ìš”
4. **í…ŒìŠ¤íŠ¸**: ìƒˆë¡œìš´ ê¸°ëŠ¥ì´ë‚˜ ë²„ê·¸ ìˆ˜ì • ì‹œ ë°˜ë“œì‹œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”
5. **ë¬¸ì„œí™”**: API ë³€ê²½ ì‹œ ê´€ë ¨ ë¬¸ì„œë¥¼ í•¨ê»˜ ì—…ë°ì´íŠ¸í•´ì£¼ì„¸ìš”

## ğŸ“„ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„ ìŠ¤ í•˜ì— ë°°í¬ë©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [LICENSE](LICENSE) íŒŒì¼ì„ ì°¸ê³ í•´ì£¼ì„¸ìš”.

## ğŸ“ ì§€ì› ë° ë¬¸ì˜

- **ì´ìŠˆ ë¦¬í¬íŒ…**: [GitHub Issues](https://github.com/your-org/mini-today-sales/issues)
- **ê¸°ëŠ¥ ì œì•ˆ**: [GitHub Discussions](https://github.com/your-org/mini-today-sales/discussions)
- **ë³´ì•ˆ ì·¨ì•½ì **: security@yourcompany.com

---

**Mini Today Sales** - *Modern Sales Management System* ğŸš€